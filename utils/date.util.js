"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var DateUtil = (function () {
    function DateUtil() {
    }
    DateUtil.getTimeSecondStamp = function (date) {
        var d = this.getDate(date);
        return d ? d.getTime() / 1000 : 0;
    };
    DateUtil.getCurTimeSecondStamp = function () {
        return new Date().getTime() / 1000;
    };
    DateUtil.getLatestSecondStampInDay = function (date) {
        return this.getLatestTimeInDay(date) ? this.getLatestTimeInDay(date).getTime() / 1000 : 0;
    };
    DateUtil.getEarliestSecondStampInDay = function (date) {
        return this.getEarliestTimeInDay(date) ? this.getEarliestTimeInDay(date).getTime() / 1000 : 0;
    };
    DateUtil.getEarliestSecondStampInMonth = function (date) {
        return this.getEarliestTimeInMonth(date) ? this.getEarliestTimeInMonth(date).getTime() / 1000 : 0;
    };
    DateUtil.getLatestSecondStampInMonth = function (date) {
        return this.getLatestTimeInMonth(date) ? this.getLatestTimeInMonth(date).getTime() / 1000 : 0;
    };
    DateUtil.getEarliestSecondStampInQuarter = function (date) {
        return this.getEarliestTimeInQuarter(date) ? this.getEarliestTimeInQuarter(date).getTime() / 1000 : 0;
    };
    DateUtil.getLatestSecondStampInQuarter = function (date) {
        return this.getLatestTimeInQuarter(date) ? this.getLatestTimeInQuarter(date).getTime() / 1000 : 0;
    };
    DateUtil.getCurrentYear = function () {
        return new Date().getFullYear();
    };
    DateUtil.getCurrentMonth = function () {
        return new Date().getMonth();
    };
    DateUtil.getCurrentDay = function () {
        return new Date().getDay();
    };
    DateUtil.getLatestTimeInDay = function (date) {
        var d = this.getDate(date);
        if (d) {
            d.setHours(23, 59, 59, 0);
        }
        return d;
    };
    DateUtil.getEarliestTimeInDay = function (date) {
        var d = this.getDate(date);
        if (d) {
            d.setHours(0, 0, 0, 0);
        }
        return d;
    };
    DateUtil.getEarliestTimeInMonth = function (date) {
        var d = this.getDate(date);
        if (d) {
            d.setDate(1);
            d.setHours(0, 0, 0, 0);
        }
        return d;
    };
    DateUtil.getLatestTimeInMonth = function (date) {
        var d = this.getDate(date);
        if (d) {
            d.setDate(this.getDaysInMonth(d.getFullYear(), d.getMonth()));
            d.setHours(23, 59, 59, 0);
        }
        return d;
    };
    DateUtil.getEarliestTimeInQuarter = function (date) {
        var d = this.getDate(date);
        if (d) {
            d.setMonth(this.getEarliestMonthInQuarter(date));
            d.setDate(1);
            d.setHours(0, 0, 0, 0);
        }
        return d;
    };
    DateUtil.getLatestTimeInQuarter = function (date) {
        var d = this.getDate(date);
        if (d) {
            d.setMonth(this.getLatestMonthInQuarter(date));
            d.setDate(this.getDaysInMonth(d.getFullYear(), d.getMonth()));
            d.setHours(23, 59, 59, 0);
        }
        return d;
    };
    DateUtil.getDateStr = function (date, sFormat) {
        date = date ? date : new Date();
        sFormat = sFormat ? sFormat : 'yyyy-MM-dd';
        var time = {
            Year: 0,
            TYear: '0',
            Month: 0,
            TMonth: '0',
            Day: 0,
            TDay: '0',
            Hour: 0,
            THour: '0',
            hour: 0,
            Thour: '0',
            Minute: 0,
            TMinute: '0',
            Second: 0,
            TSecond: '0',
            Millisecond: 0
        };
        time.Year = date.getFullYear();
        time.TYear = String(time.Year).substr(2);
        time.Month = date.getMonth() + 1;
        time.TMonth = time.Month < 10 ? '0' + time.Month : String(time.Month);
        time.Day = date.getDate();
        time.TDay = time.Day < 10 ? '0' + time.Day : String(time.Day);
        time.Hour = date.getHours();
        time.THour = time.Hour < 10 ? '0' + time.Hour : String(time.Hour);
        time.hour = time.Hour < 13 ? time.Hour : time.Hour - 12;
        time.Thour = time.hour < 10 ? '0' + time.hour : String(time.hour);
        time.Minute = date.getMinutes();
        time.TMinute = time.Minute < 10 ? '0' + time.Minute : String(time.Minute);
        time.Second = date.getSeconds();
        time.TSecond = time.Second < 10 ? '0' + time.Second : String(time.Second);
        time.Millisecond = date.getMilliseconds();
        return sFormat.replace(/yyyy/ig, String(time.Year))
            .replace(/yyy/ig, String(time.Year))
            .replace(/yy/ig, time.TYear)
            .replace(/y/ig, time.TYear)
            .replace(/MM/g, time.TMonth)
            .replace(/M/g, String(time.Month))
            .replace(/dd/ig, time.TDay)
            .replace(/d/ig, String(time.Day))
            .replace(/HH/g, time.THour)
            .replace(/H/g, String(time.Hour))
            .replace(/hh/g, time.Thour)
            .replace(/h/g, String(time.hour))
            .replace(/mm/g, time.TMinute)
            .replace(/m/g, String(time.Minute))
            .replace(/ss/ig, time.TSecond)
            .replace(/s/ig, String(time.Second))
            .replace(/fff/ig, String(time.Millisecond));
    };
    DateUtil.getTimeAgo = function (oldTime) {
        var minute = 1000 * 60;
        var hour = minute * 60;
        var day = hour * 24;
        var month = day * 30;
        var year = day * 365;
        var now = new Date().getTime();
        var old = oldTime.getTime();
        var diffValue = now - old;
        var yearC = diffValue / year;
        var monthC = diffValue / month;
        var weekC = diffValue / (7 * day);
        var dayC = diffValue / day;
        var hourC = diffValue / hour;
        var minC = diffValue / minute;
        if (yearC >= 1) {
            return Math.floor(monthC) + '年前';
        }
        else if (monthC >= 1) {
            return Math.floor(monthC) + '个月前';
        }
        else if (weekC >= 1) {
            return Math.floor(weekC) + '周前';
        }
        else if (dayC >= 1) {
            return Math.floor(dayC) + '天前';
        }
        else if (hourC >= 1) {
            return Math.floor(hourC) + '小时前';
        }
        else if (minC >= 1) {
            return Math.floor(minC) + '分钟前';
        }
        else {
            return '刚刚';
        }
    };
    DateUtil.getServealTimeAgo = function (oldTime) {
        var minute = 1000 * 60;
        var hour = minute * 60;
        var day = hour * 24;
        var month = day * 30;
        var year = day * 365;
        var now = new Date().getTime();
        var old = oldTime.getTime();
        var diffValue = now - old;
        var yearC = diffValue / year;
        var monthC = diffValue / month;
        var dayC = diffValue / day;
        var hourC = diffValue / hour;
        var minC = diffValue / minute;
        if (yearC >= 2) {
            return this.getDateStr(oldTime, 'yyyy-MM-dd HH:mm:ss');
        }
        else if (yearC >= 1) {
            return Math.floor(yearC) + '年前';
        }
        else if (monthC >= 1) {
            return Math.floor(monthC) + '月前';
        }
        else if (dayC >= 1) {
            return Math.floor(dayC) + '天前';
        }
        else if (hourC >= 1) {
            return Math.floor(hourC) + '小时前';
        }
        else if (minC >= 1) {
            return Math.floor(minC) + '分钟前';
        }
        else {
            return '刚刚';
        }
    };
    DateUtil.getEarliestMonthInQuarter = function (date) {
        return this.getQuarter(date) * 3;
    };
    DateUtil.getLatestMonthInQuarter = function (date) {
        return this.getQuarter(date) * 3 + 2;
    };
    DateUtil.getQuarter = function (date) {
        var d = this.getDate(date);
        if (d) {
            var month = d.getMonth();
            return Math.floor(month / 3);
        }
        return 0;
    };
    DateUtil.getDaysInMonth = function (year, month) {
        month++;
        var temp = new Date(year, month, 0);
        return temp.getDate();
    };
    DateUtil.getDate = function (date) {
        var d;
        if (typeof date === 'string') {
            d = new Date(date);
        }
        else if (typeof date === 'number') {
            d = new Date(date);
        }
        else {
            d = date;
        }
        return d;
    };
    DateUtil.getEarlyQuartsInfo = function (earlyYear) {
        var dateItems = [];
        var currentYear = DateUtil.getCurrentYear();
        for (var i = currentYear; i >= earlyYear; i--) {
            var k = 4;
            if (i === currentYear) {
                k = DateUtil.getQuarter(new Date()) + 1;
            }
            for (var j = k; j >= 1; j--) {
                var dateStr = i + "/" + j * 3 + "/01";
                dateItems.push({
                    des: i + '年第' + j + '季度',
                    minDate: DateUtil.getEarliestSecondStampInQuarter(dateStr),
                    maxDate: DateUtil.getLatestSecondStampInQuarter(dateStr)
                });
            }
        }
        return dateItems;
    };
    return DateUtil;
}());
exports.DateUtil = DateUtil;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS51dGlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGF0ZS51dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBR0E7SUFBQTtJQStZQSxDQUFDO0lBeFlVLDJCQUFrQixHQUF6QixVQUEwQixJQUE0QjtRQUNsRCxJQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQU1NLDhCQUFxQixHQUE1QjtRQUNJLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUM7SUFDdkMsQ0FBQztJQU9NLGtDQUF5QixHQUFoQyxVQUFpQyxJQUE0QjtRQUN6RCxPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlGLENBQUM7SUFPTSxvQ0FBMkIsR0FBbEMsVUFBbUMsSUFBNEI7UUFDM0QsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsRyxDQUFDO0lBT00sc0NBQTZCLEdBQXBDLFVBQXFDLElBQTRCO1FBQzdELE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLEdBQUcsSUFBSSxD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NUIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7UUFDeEQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDaEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDaEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFFMUMsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFD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Q0FBQyxHQUFHLENBQUMsQ0FBQzthQUMzQztZQUNELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3pCLElBQU0sT0FBTyxHQUFNLENBQUMsU0FBSSxDQUFDLEdBQUcsQ0FBQyxRQUFLLENBQUM7Z0JBQ25DLFNBQVMsQ0FBQyxJQUFJLENBQUM7b0JBQ1gsR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLElBQUk7b0JBQ3hCLE9BQU8sRUFBRSxRQUFRLENBQUMsK0JBQStCLENBQUMsT0FBTyxDQUFDO29CQUMxRCxPQUFPLEVBQUUsUUFBUSxDQUFDLDZCQUE2QixDQUFDLE9BQU8sQ0FBQztpQkFDM0QsQ0FBQyxDQUFDO2FBQ047U0FDSjtRQUNELE9BQU8sU0FBUyxDQUFDO0lBQ3JCLENBQUM7SUFDTCxlQUFDO0FBQUQsQ0FBQyxBQS9ZRCxJQStZQztBQS9ZWSw0QkFBUSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDml6XmnJ/nm7jlhbPlt6XlhbfnsbtcclxuICovXHJcbmV4cG9ydCBjbGFzcyBEYXRlVXRpbCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bnp5Lml7bpl7TmiLNcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKiBAcGFyYW0gZGF0ZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0VGltZVNlY29uZFN0YW1wKGRhdGU6IHN0cmluZyB8IG51bWJlciB8IERhdGUpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGQgPSB0aGlzLmdldERhdGUoZGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuIGQgPyBkLmdldFRpbWUoKSAvIDEwMDAgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5b2T5YmN56eS5pe26Ze05oizXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0Q3VyVGltZVNlY29uZFN0YW1wKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS4gOWkqeS4reacgOaZmueahOaXtumXtOaIs1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXIgfCBEYXRlfSBkYXRlXHJcbiAgICAgKiBAcmV0dXJucyB7RGF0ZX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldExhdGVzdFNlY29uZFN0YW1wSW5EYXkoZGF0ZTogc3RyaW5nIHwgbnVtYmVyIHwgRGF0ZSk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGF0ZXN0VGltZUluRGF5KGRhdGUpID8gdGhpcy5nZXRMYXRlc3RUaW1lSW5EYXkoZGF0ZSkuZ2V0VGltZSgpIC8gMTAwMCA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bkuIDlpKnkuK3mnIDml6nnmoTml7bpl7TmiLNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyIHwgRGF0ZX0gZGF0ZVxyXG4gICAgICogQHJldHVybnMge0RhdGV9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRFYXJsaWVzdFNlY29uZFN0YW1wSW5EYXkoZGF0ZTogc3RyaW5nIHwgbnVtYmVyIHwgRGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEVhcmxpZXN0VGltZUluRGF5KGRhdGUpID8gdGhpcy5nZXRFYXJsaWVzdFRpbWVJbkRheShkYXRlKS5nZXRUaW1lKCkgLyAxMDAwIDogMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS4gOaciOS4reacgOaXqeeahOaXtumXtOaIs1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXIgfCBEYXRlfSBkYXRlXHJcbiAgICAgKiBAcmV0dXJucyB7RGF0ZX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEVhcmxpZXN0U2Vjb25kU3RhbXBJbk1vbnRoKGRhdGU6IHN0cmluZyB8IG51bWJlciB8IERhdGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRFYXJsaWVzdFRpbWVJbk1vbnRoKGRhdGUpID8gdGhpcy5nZXRFYXJsaWVzdFRpbWVJbk1vbnRoKGRhdGUpLmdldFRpbWUoKSAvIDEwMDAgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5LiA5pyI5Lit5pyA5pma55qE5pe26Ze05oizXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlciB8IERhdGV9IGRhdGVcclxuICAgICAqIEByZXR1cm5zIHtEYXRlfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0TGF0ZXN0U2Vjb25kU3RhbXBJbk1vbnRoKGRhdGU6IHN0cmluZyB8IG51bWJlciB8IERhdGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXRlc3RUaW1lSW5Nb250aChkYXRlKSA/IHRoaXMuZ2V0TGF0ZXN0VGltZUluTW9udGgoZGF0ZSkuZ2V0VGltZSgpIC8gMTAwMCA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bkuIDlraPluqbkuK3mnIDml6nnmoTml7bpl7TmiLNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyIHwgRGF0ZX0gZGF0ZVxyXG4gICAgICogQHJldHVybnMge0RhdGV9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRFYXJsaWVzdFNlY29uZFN0YW1wSW5RdWFydGVyKGRhdGU6IHN0cmluZyB8IG51bWJlciB8IERhdGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRFYXJsaWVzdFRpbWVJblF1YXJ0ZXIoZGF0ZSkgPyB0aGlzLmdldEVhcmxpZXN0VGltZUluUXVhcnRlcihkYXRlKS5nZXRUaW1lKCkgLyAxMDAwIDogMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS4gOWto+W6puS4reacgOaZmueahOaXtumXtOaIs1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXIgfCBEYXRlfSBkYXRlXHJcbiAgICAgKiBAcmV0dXJucyB7RGF0ZX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldExhdGVzdFNlY29uZFN0YW1wSW5RdWFydGVyKGRhdGU6IHN0cmluZyB8IG51bWJlciB8IERhdGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXRlc3RUaW1lSW5RdWFydGVyKGRhdGUpID8gdGhpcy5nZXRMYXRlc3RUaW1lSW5RdWFydGVyKGRhdGUpLmdldFRpbWUoKSAvIDEwMDAgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5b2T5YmN5bm0XHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0Q3VycmVudFllYXIoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5b2T5YmN5pyIXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0Q3VycmVudE1vbnRoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0TW9udGgoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluW9k+WJjeWkqVxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEN1cnJlbnREYXkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXREYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS4gOWkqeeahOacgOaZmuaXtumXtFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXIgfCBEYXRlfSBkYXRlXHJcbiAgICAgKiBAcmV0dXJucyB7RGF0ZX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldExhdGVzdFRpbWVJbkRheShkYXRlOiBzdHJpbmcgfCBudW1iZXIgfCBEYXRlKTogRGF0ZSB7XHJcbiAgICAgICAgY29uc3QgZCA9IHRoaXMuZ2V0RGF0ZShkYXRlKTtcclxuICAgICAgICBpZiAoZCkge1xyXG4gICAgICAgICAgICBkLnNldEhvdXJzKDIzLCA1OSwgNTksIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS4gOWkqeeahOacgOaXqeaXtumXtFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXIgfCBEYXRlfSBkYXRlXHJcbiAgICAgKiBAcmV0dXJucyB7RGF0ZX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEVhcmxpZXN0VGltZUluRGF5KGRhdGU6IHN0cmluZyB8IG51bWJlciB8IERhdGUpOiBEYXRlIHtcclxuICAgICAgICBjb25zdCBkID0gdGhpcy5nZXREYXRlKGRhdGUpO1xyXG4gICAgICAgIGlmIChkKSB7XHJcbiAgICAgICAgICAgIGQuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5LiA5pyI55qE5pyA5pep5pe26Ze0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlciB8IERhdGV9IGRhdGVcclxuICAgICAqIEByZXR1cm5zIHtEYXRlfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0RWFybGllc3RUaW1lSW5Nb250aChkYXRlOiBzdHJpbmcgfCBudW1iZXIgfCBEYXRlKTogRGF0ZSB7XHJcbiAgICAgICAgY29uc3QgZCA9IHRoaXMuZ2V0RGF0ZShkYXRlKTtcclxuICAgICAgICBpZiAoZCkge1xyXG4gICAgICAgICAgICBkLnNldERhdGUoMSk7XHJcbiAgICAgICAgICAgIGQuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5LiA5pyI55qE5pyA5pma5pe26Ze0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlciB8IERhdGV9IGRhdGVcclxuICAgICAqIEByZXR1cm5zIHtEYXRlfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0TGF0ZXN0VGltZUluTW9udGgoZGF0ZTogc3RyaW5nIHwgbnVtYmVyIHwgRGF0ZSk6IERhdGUge1xyXG4gICAgICAgIGNvbnN0IGQgPSB0aGlzLmdldERhdGUoZGF0ZSk7XHJcbiAgICAgICAgaWYgKGQpIHtcclxuICAgICAgICAgICAgZC5zZXREYXRlKHRoaXMuZ2V0RGF5c0luTW9udGgoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCkpKTtcclxuICAgICAgICAgICAgZC5zZXRIb3VycygyMywgNTksIDU5LCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blraPluqbnmoTmnIDml6nml7bpl7RcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyIHwgRGF0ZX0gZGF0ZVxyXG4gICAgICogQHJldHVybnMge0RhdGV9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRFYXJsaWVzdFRpbWVJblF1YXJ0ZXIoZGF0ZTogc3RyaW5nIHwgbnVtYmVyIHwgRGF0ZSk6IERhdGUge1xyXG4gICAgICAgIGNvbnN0IGQgPSB0aGlzLmdldERhdGUoZGF0ZSk7XHJcbiAgICAgICAgaWYgKGQpIHtcclxuICAgICAgICAgICAgZC5zZXRNb250aCh0aGlzLmdldEVhcmxpZXN0TW9udGhJblF1YXJ0ZXIoZGF0ZSkpO1xyXG4gICAgICAgICAgICBkLnNldERhdGUoMSk7XHJcbiAgICAgICAgICAgIGQuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5a2j5bqm55qE5pyA5pma5pe26Ze0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlciB8IERhdGV9IGRhdGVcclxuICAgICAqIEByZXR1cm5zIHtEYXRlfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0TGF0ZXN0VGltZUluUXVhcnRlcihkYXRlOiBzdHJpbmcgfCBudW1iZXIgfCBEYXRlKTogRGF0ZSB7XHJcbiAgICAgICAgY29uc3QgZCA9IHRoaXMuZ2V0RGF0ZShkYXRlKTtcclxuICAgICAgICBpZiAoZCkge1xyXG4gICAgICAgICAgICBkLnNldE1vbnRoKHRoaXMuZ2V0TGF0ZXN0TW9udGhJblF1YXJ0ZXIoZGF0ZSkpO1xyXG4gICAgICAgICAgICBkLnNldERhdGUodGhpcy5nZXREYXlzSW5Nb250aChkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSkpO1xyXG4gICAgICAgICAgICBkLnNldEhvdXJzKDIzLCA1OSwgNTksIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaXpeacn+Wvueixoei9rOS4uuaXpeacn+Wtl+espuS4slxyXG4gICAgICogQHBhcmFtIGRhdGUg6ZyA6KaB5qC85byP5YyW55qE5pel5pyf5a+56LGhXHJcbiAgICAgKiBAcGFyYW0gc0Zvcm1hdCDovpPlh7rmoLzlvI8s6buY6K6k5Li6eXl5eS1NTS1kZCAgICAgICAgICAgICAgICAgICAgICAgIOW5tO+8mnnvvIzmnIjvvJpN77yM5pel77yaZO+8jOaXtu+8mmjvvIzliIbvvJpt77yM56eS77yac1xyXG4gICAgICogQGV4YW1wbGUgIGRhdGVGb3JtYXQobmV3IERhdGUoKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIyMDE3LTAyLTI4XCJcclxuICAgICAqIEBleGFtcGxlICBkYXRlRm9ybWF0KG5ldyBEYXRlKCksJ3l5eXktTU0tZGQnKSAgICAgICAgICAgICAgICAgIFwiMjAxNy0wMi0yOFwiXHJcbiAgICAgKiBAZXhhbXBsZSAgZGF0ZUZvcm1hdChuZXcgRGF0ZSgpLCd5eXl5LU1NLWRkIEhIOm1tOnNzJykgICAgICAgICBcIjIwMTctMDItMjggMTM6MjQ6MDBcIiAgIHBzOkhIOjI05bCP5pe25Yi2XHJcbiAgICAgKiBAZXhhbXBsZSAgZGF0ZUZvcm1hdChuZXcgRGF0ZSgpLCd5eXl5LU1NLWRkIGhoOm1tOnNzJykgICAgICAgICBcIjIwMTctMDItMjggMDE6MjQ6MDBcIiAgIHBzOmhoOjEy5bCP5pe25Yi2XHJcbiAgICAgKiBAZXhhbXBsZSAgZGF0ZUZvcm1hdChuZXcgRGF0ZSgpLCdoaDptbScpICAgICAgICAgICAgICAgICAgICAgICBcIjA5OjI0XCJcclxuICAgICAqIEBleGFtcGxlICBkYXRlRm9ybWF0KG5ldyBEYXRlKCksJ3l5eXktTU0tZGRUSEg6bW06c3MrMDg6MDAnKSAgIFwiMjAxNy0wMi0yOFQxMzoyNDowMCswODowMFwiXHJcbiAgICAgKiBAZXhhbXBsZSAgZGF0ZUZvcm1hdChuZXcgRGF0ZSgnMjAxNy0wMi0yOCAxMzoyNDowMCcpLCd5eXl5LU1NLWRkVEhIOm1tOnNzKzA4OjAwJykgICBcIjIwMTctMDItMjhUMTM6MjQ6MDArMDg6MDBcIlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldERhdGVTdHIoZGF0ZT86IERhdGUsIHNGb3JtYXQ/OiBTdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGRhdGUgPSBkYXRlID8gZGF0ZSA6IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgc0Zvcm1hdCA9IHNGb3JtYXQgPyBzRm9ybWF0IDogJ3l5eXktTU0tZGQnO1xyXG4gICAgICAgIGNvbnN0IHRpbWUgPSB7XHJcbiAgICAgICAgICAgIFllYXI6IDAsXHJcbiAgICAgICAgICAgIFRZZWFyOiAnMCcsXHJcbiAgICAgICAgICAgIE1vbnRoOiAwLFxyXG4gICAgICAgICAgICBUTW9udGg6ICcwJyxcclxuICAgICAgICAgICAgRGF5OiAwLFxyXG4gICAgICAgICAgICBURGF5OiAnMCcsXHJcbiAgICAgICAgICAgIEhvdXI6IDAsXHJcbiAgICAgICAgICAgIFRIb3VyOiAnMCcsXHJcbiAgICAgICAgICAgIGhvdXI6IDAsXHJcbiAgICAgICAgICAgIFRob3VyOiAnMCcsXHJcbiAgICAgICAgICAgIE1pbnV0ZTogMCxcclxuICAgICAgICAgICAgVE1pbnV0ZTogJzAnLFxyXG4gICAgICAgICAgICBTZWNvbmQ6IDAsXHJcbiAgICAgICAgICAgIFRTZWNvbmQ6ICcwJyxcclxuICAgICAgICAgICAgTWlsbGlzZWNvbmQ6IDBcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRpbWUuWWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB0aW1lLlRZZWFyID0gU3RyaW5nKHRpbWUuWWVhcikuc3Vic3RyKDIpO1xyXG4gICAgICAgIHRpbWUuTW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgIHRpbWUuVE1vbnRoID0gdGltZS5Nb250aCA8IDEwID8gJzAnICsgdGltZS5Nb250aCA6IFN0cmluZyh0aW1lLk1vbnRoKTtcclxuICAgICAgICB0aW1lLkRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIHRpbWUuVERheSA9IHRpbWUuRGF5IDwgMTAgPyAnMCcgKyB0aW1lLkRheSA6IFN0cmluZyh0aW1lLkRheSk7XHJcbiAgICAgICAgdGltZS5Ib3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgIHRpbWUuVEhvdXIgPSB0aW1lLkhvdXIgPCAxMCA/ICcwJyArIHRpbWUuSG91ciA6IFN0cmluZyh0aW1lLkhvdXIpO1xyXG4gICAgICAgIHRpbWUuaG91ciA9IHRpbWUuSG91ciA8IDEzID8gdGltZS5Ib3VyIDogdGltZS5Ib3VyIC0gMTI7XHJcbiAgICAgICAgdGltZS5UaG91ciA9IHRpbWUuaG91ciA8IDEwID8gJzAnICsgdGltZS5ob3VyIDogU3RyaW5nKHRpbWUuaG91cik7XHJcbiAgICAgICAgdGltZS5NaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICB0aW1lLlRNaW51dGUgPSB0aW1lLk1pbnV0ZSA8IDEwID8gJzAnICsgdGltZS5NaW51dGUgOiBTdHJpbmcodGltZS5NaW51dGUpO1xyXG4gICAgICAgIHRpbWUuU2Vjb25kID0gZGF0ZS5nZXRTZWNvbmRzKCk7XHJcbiAgICAgICAgdGltZS5UU2Vjb25kID0gdGltZS5TZWNvbmQgPCAxMCA/ICcwJyArIHRpbWUuU2Vjb25kIDogU3RyaW5nKHRpbWUuU2Vjb25kKTtcclxuICAgICAgICB0aW1lLk1pbGxpc2Vjb25kID0gZGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNGb3JtYXQucmVwbGFjZSgveXl5eS9pZywgU3RyaW5nKHRpbWUuWWVhcikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgveXl5L2lnLCBTdHJpbmcodGltZS5ZZWFyKSlcclxuICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC95eS9pZywgdGltZS5UWWVhcilcclxuICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC95L2lnLCB0aW1lLlRZZWFyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL01NL2csIHRpbWUuVE1vbnRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL00vZywgU3RyaW5nKHRpbWUuTW9udGgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL2RkL2lnLCB0aW1lLlREYXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvZC9pZywgU3RyaW5nKHRpbWUuRGF5KSlcclxuICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9ISC9nLCB0aW1lLlRIb3VyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL0gvZywgU3RyaW5nKHRpbWUuSG91cikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvaGgvZywgdGltZS5UaG91cilcclxuICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9oL2csIFN0cmluZyh0aW1lLmhvdXIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL21tL2csIHRpbWUuVE1pbnV0ZSlcclxuICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9tL2csIFN0cmluZyh0aW1lLk1pbnV0ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvc3MvaWcsIHRpbWUuVFNlY29uZClcclxuICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9zL2lnLCBTdHJpbmcodGltZS5TZWNvbmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL2ZmZi9pZywgU3RyaW5nKHRpbWUuTWlsbGlzZWNvbmQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluaXtumXtOeUqC4u5Lul5YmN55qE5b2i5byPXHJcbiAgICAgKiBAcGFyYW0gb2xkVGltZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0VGltZUFnbyhvbGRUaW1lOiBEYXRlKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBtaW51dGU6IG51bWJlciA9IDEwMDAgKiA2MDtcclxuICAgICAgICBjb25zdCBob3VyOiBudW1iZXIgPSBtaW51dGUgKiA2MDtcclxuICAgICAgICBjb25zdCBkYXk6IG51bWJlciA9IGhvdXIgKiAyNDtcclxuICAgICAgICBjb25zdCBtb250aDogbnVtYmVyID0gZGF5ICogMzA7XHJcbiAgICAgICAgY29uc3QgeWVhcjogbnVtYmVyID0gZGF5ICogMzY1O1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgIGNvbnN0IG9sZCA9IG9sZFRpbWUuZ2V0VGltZSgpO1xyXG4gICAgICAgIGNvbnN0IGRpZmZWYWx1ZSA9IG5vdyAtIG9sZDtcclxuICAgICAgICBjb25zdCB5ZWFyQyA9IGRpZmZWYWx1ZSAvIHllYXI7XHJcbiAgICAgICAgY29uc3QgbW9udGhDID0gZGlmZlZhbHVlIC8gbW9udGg7XHJcbiAgICAgICAgY29uc3Qgd2Vla0MgPSBkaWZmVmFsdWUgLyAoNyAqIGRheSk7XHJcbiAgICAgICAgY29uc3QgZGF5QyA9IGRpZmZWYWx1ZSAvIGRheTtcclxuICAgICAgICBjb25zdCBob3VyQyA9IGRpZmZWYWx1ZSAvIGhvdXI7XHJcbiAgICAgICAgY29uc3QgbWluQyA9IGRpZmZWYWx1ZSAvIG1pbnV0ZTtcclxuICAgICAgICBpZiAoeWVhckMgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihtb250aEMpICsgJ+W5tOWJjSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtb250aEMgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihtb250aEMpICsgJ+S4quaciOWJjSc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh3ZWVrQyA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKHdlZWtDKSArICflkajliY0nO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF5QyA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKGRheUMpICsgJ+WkqeWJjSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChob3VyQyA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKGhvdXJDKSArICflsI/ml7bliY0nO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWluQyA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKG1pbkMpICsgJ+WIhumSn+WJjSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICfliJrliJonO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluaXtumXtOS7peWHoOWIhumSn+WJje+8jOWHoOWwj+aXtuWJje+8jOaYqOWkqe+8jOWkp+S6juS4pOWkqeaYvuekuuaXpeacn1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0U2VydmVhbFRpbWVBZ28ob2xkVGltZTogRGF0ZSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgbWludXRlOiBudW1iZXIgPSAxMDAwICogNjA7XHJcbiAgICAgICAgY29uc3QgaG91cjogbnVtYmVyID0gbWludXRlICogNjA7XHJcbiAgICAgICAgY29uc3QgZGF5OiBudW1iZXIgPSBob3VyICogMjQ7XHJcbiAgICAgICAgY29uc3QgbW9udGg6IG51bWJlciA9IGRheSAqIDMwO1xyXG4gICAgICAgIGNvbnN0IHllYXI6IG51bWJlciA9IGRheSAqIDM2NTtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICBjb25zdCBvbGQgPSBvbGRUaW1lLmdldFRpbWUoKTtcclxuICAgICAgICBjb25zdCBkaWZmVmFsdWUgPSBub3cgLSBvbGQ7XHJcbiAgICAgICAgY29uc3QgeWVhckMgPSBkaWZmVmFsdWUgLyB5ZWFyO1xyXG4gICAgICAgIGNvbnN0IG1vbnRoQyA9IGRpZmZWYWx1ZSAvIG1vbnRoO1xyXG4gICAgICAgIGNvbnN0IGRheUMgPSBkaWZmVmFsdWUgLyBkYXk7XHJcbiAgICAgICAgY29uc3QgaG91ckMgPSBkaWZmVmFsdWUgLyBob3VyO1xyXG4gICAgICAgIGNvbnN0IG1pbkMgPSBkaWZmVmFsdWUgLyBtaW51dGU7XHJcbiAgICAgICAgaWYgKHllYXJDID49IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0ZVN0cihvbGRUaW1lLCAneXl5eS1NTS1kZCBISDptbTpzcycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoeWVhckMgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih5ZWFyQykgKyAn5bm05YmNJztcclxuICAgICAgICB9IGVsc2UgaWYgKG1vbnRoQyA+PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKG1vbnRoQykgKyAn5pyI5YmNJztcclxuICAgICAgICB9IGVsc2UgaWYgKGRheUMgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihkYXlDKSArICflpKnliY0nO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaG91ckMgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihob3VyQykgKyAn5bCP5pe25YmNJztcclxuICAgICAgICB9IGVsc2UgaWYgKG1pbkMgPj0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihtaW5DKSArICfliIbpkp/liY0nO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAn5Yia5YiaJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflvpflraPluqbnmoTlvIDnq6/mnIjku71cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEVhcmxpZXN0TW9udGhJblF1YXJ0ZXIoZGF0ZTogc3RyaW5nIHwgbnVtYmVyIHwgRGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFF1YXJ0ZXIoZGF0ZSkgKiAzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635b6X5a2j5bqm55qE57uT5p2f5pyI5Lu9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRMYXRlc3RNb250aEluUXVhcnRlcihkYXRlOiBzdHJpbmcgfCBudW1iZXIgfCBEYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UXVhcnRlcihkYXRlKSAqIDMgKyAyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635b6X5pel5pyf55qE5a2j5bqmXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRRdWFydGVyKGRhdGU6IHN0cmluZyB8IG51bWJlciB8IERhdGUpIHtcclxuICAgICAgICBjb25zdCBkID0gdGhpcy5nZXREYXRlKGRhdGUpO1xyXG4gICAgICAgIGlmIChkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gZC5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihtb250aCAvIDMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluafkOaciOeahOWkqeaVsFxyXG4gICAgICogQHBhcmFtIHllYXJcclxuICAgICAqIEBwYXJhbSBtb250aFxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldERheXNJbk1vbnRoKHllYXI6IG51bWJlciwgbW9udGg6IG51bWJlcikge1xyXG4gICAgICAgIG1vbnRoKys7XHJcbiAgICAgICAgY29uc3QgdGVtcCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKTtcclxuICAgICAgICByZXR1cm4gdGVtcC5nZXREYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bml6XmnJ/lrp7kvotcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyIHwgRGF0ZX0gZGF0ZVxyXG4gICAgICogQHJldHVybnMge0RhdGV9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXREYXRlKGRhdGU6IHN0cmluZyB8IG51bWJlciB8IERhdGUpIHtcclxuICAgICAgICBsZXQgZDogRGF0ZTtcclxuICAgICAgICBpZiAodHlwZW9mIGRhdGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGQgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICBkID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZCA9IGRhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5b2T5YmN5pel5pyf5Yiw5LmL5YmN5p+Q5LiA5bm055qE5a2j5bqm5L+h5oGvKOWQjeensOS7peWPim1pbkRhdGXjgIFtYXhEYXRlKVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXIgfCBEYXRlfSBlYXJseVllYXIg5pyA5pep55qE5bm05Lu9XHJcbiAgICAgKiBAcmV0dXJucyB7eyBkZXM6IHN0cmluZywgbWluRGF0ZTogbnVtYmVyLCBtYXhEYXRlOiBudW1iZXIgfVtdfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0RWFybHlRdWFydHNJbmZvKGVhcmx5WWVhcjogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgZGF0ZUl0ZW1zOiB7IGRlczogc3RyaW5nLCBtaW5EYXRlOiBudW1iZXIsIG1heERhdGU6IG51bWJlciB9W10gPSBbXTtcclxuICAgICAgICBjb25zdCBjdXJyZW50WWVhciA9IERhdGVVdGlsLmdldEN1cnJlbnRZZWFyKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGN1cnJlbnRZZWFyOyBpID49IGVhcmx5WWVhcjsgaS0tKSB7XHJcbiAgICAgICAgICAgIGxldCBrID0gNDsgLy8g6buY6K6k56ys5Zub5a2j5bqmXHJcbiAgICAgICAgICAgIGlmIChpID09PSBjdXJyZW50WWVhcikge1xyXG4gICAgICAgICAgICAgICAgayA9IERhdGVVdGlsLmdldFF1YXJ0ZXIobmV3IERhdGUoKSkgKyAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBrOyBqID49IDE7IGotLSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGAke2l9LyR7aiAqIDN9LzAxYDtcclxuICAgICAgICAgICAgICAgIGRhdGVJdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBkZXM6IGkgKyAn5bm056ysJyArIGogKyAn5a2j5bqmJyxcclxuICAgICAgICAgICAgICAgICAgICBtaW5EYXRlOiBEYXRlVXRpbC5nZXRFYXJsaWVzdFNlY29uZFN0YW1wSW5RdWFydGVyKGRhdGVTdHIpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heERhdGU6IERhdGVVdGlsLmdldExhdGVzdFNlY29uZFN0YW1wSW5RdWFydGVyKGRhdGVTdHIpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0ZUl0ZW1zO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==